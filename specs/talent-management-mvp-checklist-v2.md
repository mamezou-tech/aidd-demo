# タレントマネジメントMVP仕様 - チェック観点リスト（提案型）

**Version**: 1.0.0  
**Created**: 2025-11-14  
**Related Spec**: talent-management-mvp.md (Version 1.5.0)

## 1. 検索条件の組み合わせ

### 1.1 複数条件の組み合わせ検索

**現状の仕様**:
- すべての検索項目で部分一致検索を採用
- 検索条件: 氏名、氏名カナ、社員コード、所属組織、役職、スキル

**チェック項目**:
- [ ] 複数の検索条件を同時に指定できるか？
- [ ] 複数条件はAND検索かOR検索か？

**提案**:
複数の検索条件を同時に指定した場合、すべての条件を満たす社員を検索する（AND検索）という理解でよろしいでしょうか？

例: 氏名に「田中」、スキルに「Java」を指定した場合、「田中」という名前で「Java」スキルを持つ社員のみを表示する。

**ユーザー回答**:
```
同意
```

### 1.2 スキル検索の詳細

**現状の仕様**:
- スキル検索は社員検索画面の検索条件の一部

**チェック項目**:
- [ ] スキルは単一選択か複数選択か？
- [ ] 複数スキルを選択した場合、AND検索かOR検索か？
- [ ] スキルレベルを検索条件に含められるか？

**提案1: スキル選択方式**
スキル検索は単一選択（1つのスキルのみ指定可能）とし、複数スキルの組み合わせ検索はMVP対象外とする、という理解でよろしいでしょうか？

**ユーザー回答**:
```
スキルは「Java」「AWS」など、スキルマスタに登録されている項目で検索可能とします。社員検索と同様、AND検索とします。
```

**提案2: スキルレベルの扱い**
スキルレベル（基礎/中級/上級）は検索条件に含めず、スキル名のみで検索する、という理解でよろしいでしょうか？

**ユーザー回答**:
```
スキルで検索します。社員検索画面の検索項目として「Java」などスキルマスタの項目が検索できます。スキルレベルの３段階をプルダウンで検索可能dえす
```

### 1.3 検索条件の入力形式

**提案1: 検索条件の必須性**
すべての検索条件は任意とし、何も入力せずに検索した場合は全社員を表示する、という理解でよろしいでしょうか？

回答：良い。

**提案2: 空白文字の扱い**
検索条件に空白文字のみを入力した場合は、その条件を無視する（未入力と同じ扱い）、という理解でよろしいでしょうか？

回答：良い。

### 1.4 検索結果の件数制限

**現状の仕様**:
- 1ページ20件表示
- パフォーマンス要件: 1000件以下の結果を3秒以内に表示

**チェック項目**:
- [ ] 検索結果が1000件を超える場合の挙動は？
- [ ] 検索結果が0件の場合のメッセージは？

**提案1: 1000件超過時の挙動**
検索結果が1000件を超える場合、警告メッセージを表示し、先頭1000件のみを表示する、という理解でよろしいでしょうか？

回答：先頭1000件のみを表示する。エラーメッセージ不要

メッセージ例: 「検索結果が1000件を超えています。先頭1000件のみ表示しています。検索条件を絞り込んでください。」

**提案2: 0件時のメッセージ**
検索結果が0件の場合、「該当する社員が見つかりませんでした。」というメッセージを表示する、という理解でよろしいでしょうか？

回答：よい

### 1.5 削除済み社員の扱い

**現状の仕様**:
- 社員は論理削除（deleted_at）
- 削除されたデータは一覧・検索結果に表示しない

**チェック項目**:
- [ ] 削除済み社員は検索結果から自動的に除外されるか？
- [ ] 削除済み社員を検索する機能は必要か？

**提案**:
削除済み社員（deleted_at が NULL でない）は、すべての検索結果から自動的に除外される、という理解でよろしいでしょうか？

削除済み社員を検索する機能はMVP対象外とする。

回答：よい


## 2. 顔写真アップロード／表示のエラーケース

### 2.1 アップロード時のバリデーション

**現状の仕様**:
- 画像形式: JPEG/PNG
- サイズ制限: 最大2MB
- リサイズ・変換は行わない

**チェック項目**:
- [ ] JPEG/PNG以外の形式をアップロードした場合のエラーメッセージは？
- [ ] 2MBを超えるファイルをアップロードした場合のエラーメッセージは？
- [ ] 破損した画像ファイルをアップロードした場合の挙動は？
- [ ] 画像ファイル以外（PDF、Excelなど）をアップロードした場合の挙動は？

**提案1: ファイル形式エラー**
JPEG/PNG以外の形式をアップロードした場合、以下のエラーメッセージを表示し、アップロードを拒否する、という理解でよろしいでしょうか？

エラーメッセージ例: 「JPEG形式またはPNG形式の画像ファイルのみアップロード可能です。」

**提案2: ファイルサイズエラー**
2MBを超えるファイルをアップロードした場合、以下のエラーメッセージを表示し、アップロードを拒否する、という理解でよろしいでしょうか？

エラーメッセージ例: 「ファイルサイズは2MB以下にしてください。現在のファイルサイズ: X.X MB」

**提案3: 破損ファイルの扱い**
破損した画像ファイルをアップロードした場合、以下のエラーメッセージを表示し、アップロードを拒否する、という理解でよろしいでしょうか？

エラーメッセージ例: 「画像ファイルが破損しているため、アップロードできません。」

回答：顔写真アップロードはMVPでは実装しない

### 2.2 アップロード処理のエラー

**チェック項目**:
- [ ] データベース容量不足の場合の挙動は？
- [ ] ネットワークエラー（アップロード中断）の場合の挙動は？
- [ ] 同時に複数の人事担当者が同じ社員の写真を更新した場合の挙動は？

**提案1: データベース容量不足**
データベース容量不足でアップロードに失敗した場合、以下のエラーメッセージを表示し、システム管理者に連絡を促す、という理解でよろしいでしょうか？

エラーメッセージ例: 「システムエラーが発生しました。システム管理者に連絡してください。」

**提案2: ネットワークエラー**
ネットワークエラーでアップロードに失敗した場合、以下のエラーメッセージを表示し、再試行を促す、という理解でよろしいでしょうか？

エラーメッセージ例: 「ネットワークエラーが発生しました。もう一度お試しください。」

回答：顔写真アップロードはMVPでは実装しない

**提案3: 同時更新の制御**
MVPでは同時更新制御（楽観的ロック）は実装せず、後勝ち（最後に保存した内容で上書き）とする、という理解でよろしいでしょうか？

回答：良い

### 2.3 顔写真表示時のエラー

**現状の仕様**:
- 顔写真はデータベースのBLOBフィールドに保存
- 未登録時: photoフィールドはNULL

**チェック項目**:
- [ ] 顔写真が未登録の場合の表示は？
- [ ] 画像データが破損している場合の表示は？
- [ ] 画像読み込みに失敗した場合の表示は？

**提案1: 未登録時の表示**
顔写真が未登録（photoフィールドがNULL）の場合、デフォルト画像（人物アイコン）を表示する、という理解でよろしいでしょうか？

デフォルト画像は、フロントエンド側で用意する静的な画像ファイルとする。

**提案2: 破損データの表示**
画像データが破損している場合、デフォルト画像を表示し、エラーログに記録する、という理解でよろしいでしょうか？

**提案3: 読み込み失敗時の表示**
画像読み込みに失敗した場合、デフォルト画像を表示し、ユーザーにはエラーメッセージを表示しない（ユーザー体験を損なわないため）、という理解でよろしいでしょうか？

回答：良い

### 2.4 顔写真の更新・削除

**現状の仕様**:
- 更新時: 古い画像を即座に上書き
- 削除機能: MVP対象外（更新のみ可能）

**チェック項目**:
- [ ] 顔写真を「未登録状態」に戻す方法は？
- [ ] 顔写真の更新に失敗した場合、古い画像は保持されるか？

**提案1: 未登録状態への戻し方**
顔写真を未登録状態に戻す機能はMVP対象外とし、別の画像で上書きすることのみ可能とする、という理解でよろしいでしょうか？

どうしても削除したい場合は、データベースを直接操作する運用とする。

**提案2: 更新失敗時の挙動**
顔写真の更新に失敗した場合、トランザクションをロールバックし、古い画像を保持する、という理解でよろしいでしょうか？

エラーメッセージ例: 「顔写真の更新に失敗しました。もう一度お試しください。」

回答：顔写真アップロードはMVPでは実装しない


## 3. 組織階層変更時の制約

### 3.1 組織管理機能の対象外確認

**現状の仕様**:
- 組織情報管理（登録・編集・削除）はMVP対象外
- 組織は参照のみ

**チェック項目**:
- [ ] 組織データはどのように初期投入するか？
- [ ] 組織データの変更が必要な場合の運用方法は？

**提案1: 組織データの初期投入**
組織データは、システム稼働前にSQLスクリプトまたはCSVインポートで初期投入する、という理解でよろしいでしょうか？

初期投入後の組織データ変更は、データベースを直接操作する運用とする。

回答：良い

**提案2: 組織マスタの管理者**
組織データの管理は、システム管理者またはデータベース管理者が行い、人事担当者は画面から変更できない、という理解でよろしいでしょうか？

回答：良い

### 3.2 組織と社員の関連

**現状の仕様**:
- 社員は1つの組織にのみ所属
- 組織階層は単純な親子関係のみ

**チェック項目**:
- [ ] 存在しない組織IDを社員に設定した場合の挙動は？
- [ ] 組織未所属の社員は存在するか？
- [ ] 社員編集時、組織の選択は必須か任意か？

**提案1: 組織IDの妥当性チェック**
社員編集時、存在しない組織IDを設定しようとした場合、以下のエラーメッセージを表示し、保存を拒否する、という理解でよろしいでしょうか？

エラーメッセージ例: 「指定された組織が存在しません。」

回答：良い

**提案2: 組織未所属の扱い**
すべての社員は必ず1つの組織に所属する必要があり、組織未所属の社員は存在しない、という理解でよろしいでしょうか？

社員編集時、組織の選択は必須項目とする。

回答：良い

**提案3: 組織選択のUI**
社員編集画面の組織選択は、ドロップダウンリストで全組織を表示し、1つを選択する形式とする、という理解でよろしいでしょうか？

回答：良い

### 3.3 組織階層の整合性

**チェック項目**:
- [ ] 組織階層の最大深さは？
- [ ] 循環参照（親組織が自分自身や子孫を指す）のチェックは必要か？

**提案1: 組織階層の深さ**
組織階層の最大深さは5階層程度を想定し、それ以上の深い階層は考慮しない、という理解でよろしいでしょうか？

例: 本社 → 事業部 → 部 → 課 → チーム

回答：よい

**提案2: 循環参照のチェック**
組織データはシステム管理者が直接データベースを操作して管理するため、循環参照のチェックはアプリケーション側では実装しない、という理解でよろしいでしょうか？

データ投入時に、システム管理者が手動で整合性を確認する運用とする。

回答：よい

## 4. スキルマスタ変更時の影響

### 4.1 スキルマスタ管理機能の対象外確認

**現状の仕様**:
- スキルマスタ管理（登録・編集・削除）はMVP対象外
- スキルマスタは参照のみ

**チェック項目**:
- [ ] スキルマスタはどのように初期投入するか？
- [ ] スキルマスタの変更が必要な場合の運用方法は？

**提案1: スキルマスタの初期投入**
スキルマスタは、システム稼働前にSQLスクリプトまたはCSVインポートで初期投入する、という理解でよろしいでしょうか？

初期投入後のスキルマスタ変更は、データベースを直接操作する運用とする。

回答：よい


**提案2: スキルマスタの管理者**
スキルマスタの管理は、システム管理者またはデータベース管理者が行い、人事担当者は画面から変更できない、という理解でよろしいでしょうか？

回答：よい

### 4.2 スキルマスタと社員スキルの関連

**現状の仕様**:
- 社員スキルはスキルマスタを参照
- スキルレベル: 1=基礎、2=中級、3=上級

**チェック項目**:
- [ ] 存在しないスキルIDを社員スキルに設定した場合の挙動は？
- [ ] 同じ社員が同じスキルを複数回登録できるか？
- [ ] スキルの登録数に上限はあるか？

**提案1: スキルIDの妥当性チェック**
社員編集時、存在しないスキルIDを設定しようとした場合、以下のエラーメッセージを表示し、保存を拒否する、という理解でよろしいでしょうか？

エラーメッセージ例: 「指定されたスキルが存在しません。」

回答：スキルIDは編集できない。スキルレベルのみ編集可能


**提案2: 重複スキルの扱い**
同じ社員が同じスキルを複数回登録することはできず、既に登録済みのスキルを追加しようとした場合、以下のエラーメッセージを表示する、という理解でよろしいでしょうか？

エラーメッセージ例: 「このスキルは既に登録されています。」

スキルレベルを変更したい場合は、既存のスキルを削除してから再登録する、または既存のスキルのレベルを直接変更する。

回答：スキルIDは編集できない。スキルレベルのみ編集可能

**提案3: スキル登録数の上限**
1人の社員が登録できるスキル数に上限は設けず、必要なだけ登録できる、という理解でよろしいでしょうか？

ただし、実用上は10～20個程度を想定する。

回答：スキルIDは編集/登録できない。スキルレベルのみ編集可能

### 4.3 スキルマスタの変更影響

**チェック項目**:
- [ ] スキルマスタのスキル名を変更した場合、社員スキルの表示はどうなるか？
- [ ] スキルマスタを削除した場合、そのスキルを持つ社員の表示はどうなるか？

**提案1: スキル名変更時の影響**
スキルマスタのスキル名を変更した場合、社員スキルの表示には変更後のスキル名が自動的に反映される（外部キーで参照しているため）、という理解でよろしいでしょうか？

回答：スキルマスタの登録・編集・削除はシステム管理者が行う

**提案2: スキル削除時の影響**
スキルマスタを削除する場合、そのスキルを保有している社員が存在しないことを事前に確認する運用とする、という理解でよろしいでしょうか？

もし社員スキルが存在する場合は、先に社員スキルを削除してからスキルマスタを削除する。

データベースの外部キー制約は、ON DELETE RESTRICTとし、参照されているスキルマスタは削除できないようにする。

回答：スキルマスタの登録・編集・削除はシステム管理者が行う

### 4.4 スキル選択のUI

**チェック項目**:
- [ ] スキル選択はどのようなUIか？
- [ ] スキルの並び順は？
- [ ] スキルが多数ある場合の検索機能は？

**提案1: スキル選択のUI**
社員編集画面のスキル選択は、ドロップダウンリストで全スキルを表示し、1つを選択する形式とする、という理解でよろしいでしょうか？

選択後、レベル（1-3）を選択し、「追加」ボタンで保有スキル一覧に追加する。

回答：スキルマスタの各項目を、社員氏名などの社員マスタの項目と同様に表示する。値にはレベル（1-3）を表示

**提案2: スキルの並び順**
ドロップダウンリストのスキルは、スキル名の昇順（あいうえお順、ABC順）で表示する、という理解でよろしいでしょうか？

回答：スキルマスタのID順序

**提案3: スキル検索機能**
スキルが多数ある場合でも、MVPではドロップダウンリストのみで対応し、スキル検索機能（インクリメンタルサーチなど）は実装しない、という理解でよろしいでしょうか？

スキル数が100個を超える場合は、将来的に検索機能の追加を検討する。

回答：スキルマスタの内容をすべて表示する

## 5. その他の確認事項

### 5.1 データ整合性

**チェック項目**:
- [ ] 同時更新制御（楽観的ロック）は実装するか？
- [ ] トランザクション境界はどこか？

**提案1: 同時更新制御**
MVPでは同時更新制御（楽観的ロック）は実装せず、後勝ち（最後に保存した内容で上書き）とする、という理解でよろしいでしょうか？

将来的に、バージョン番号フィールド（version）を追加して楽観的ロックを実装することを検討する。

回答：よい

**提案2: トランザクション境界**
社員情報の保存時、基本情報・顔写真・スキル情報をすべて1つのトランザクションで処理し、いずれかが失敗した場合はすべてロールバックする、という理解でよろしいでしょうか？

回答：よい

### 5.2 バリデーション

**チェック項目**:
- [ ] 各項目の必須/任意は？
- [ ] 各項目の最大文字数は？
- [ ] メールアドレスの形式チェックは？
- [ ] 入社日の妥当性チェックは？

**提案1: 必須項目**
以下の項目を必須とし、未入力の場合はエラーメッセージを表示する、という理解でよろしいでしょうか？

必須項目:
- 氏名
- 氏名カナ
- 社員コード
- メールアドレス
- 所属組織
- 役職
- 雇用区分
- 入社日

任意項目:
- 顔写真
- スキル（0個でも可）

回答：よい

**提案2: 最大文字数**
各項目の最大文字数を以下のように設定する、という理解でよろしいでしょうか？

- 氏名: 100文字
- 氏名カナ: 200文字（半角カタカナのため）
- 社員コード: 20文字
- メールアドレス: 255文字
- 役職: 50文字
- 雇用区分: 20文字

回答：よい

**提案3: メールアドレスの形式チェック**
メールアドレスは、基本的な形式チェック（@を含む、ドメイン部分がある）のみ行い、厳密なRFC準拠のチェックは行わない、という理解でよろしいでしょうか？

回答：よい

**提案4: 入社日の妥当性チェック**
入社日は、過去の日付のみ許可し、未来の日付は許可しない、という理解でよろしいでしょうか？

エラーメッセージ例: 「入社日は今日以前の日付を入力してください。」

回答：よい

### 5.3 初期データ

**チェック項目**:
- [ ] 初期データの投入方法は？
- [ ] テストデータは用意するか？

**提案1: 初期データの投入**
以下のデータは、システム稼働前にSQLスクリプトで初期投入する、という理解でよろしいでしょうか？

- 組織マスタ
- スキルマスタ
- 管理者ユーザー（人事担当者）

回答：よい

**提案2: テストデータ**
開発・テスト用に、以下のテストデータを用意する、という理解でよろしいでしょうか？

- 社員データ: 10～20件程度
- 組織データ: 5～10件程度
- スキルマスタ: 20～30件程度

テストデータは、実在しない架空の氏名・メールアドレスを使用する。

回答：よい。スキルマスタは、 2～3件程度でよい
