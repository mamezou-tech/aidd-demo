# Feature Specification: 社員検索システム（MVP）

**Feature Branch**: `001-employee-search-system`  
**Created**: 2025-11-17  
**Status**: Clarified  
**Input**: User description: "社員検索システム（MVP）の仕様を作成してください。【目的】社員情報を一元管理し、人事が「誰がどのスキルを持ち、どの組織に所属しているか」をすばやく把握できるようにすること。"

## User Scenarios & Testing

### User Story 1 - スキル保有者の検索と候補者リスト作成 (Priority: P1)

人事担当者が、特定のスキル（例：Java、AWS）を持つ社員を検索し、部署横断で候補者リストを作成する。スキル検索はAND条件（すべてのスキルを保有する社員）で絞り込む。検索結果はカード表示と一覧表示を切り替えられ、デフォルトは一覧表示とする。一覧表示の列順序は固定で、左から顔写真、社員ID、氏名、組織、役職、雇用形態の順とする。

**Why this priority**: 本システムの最も重要な価値提供。配置最適化や要員検討の基盤となる機能。

**Independent Test**: 社員データとスキルデータが登録されている状態で、スキル検索を実行し、該当する社員一覧が表示されることで独立してテスト可能。

**Acceptance Scenarios**:

1. **Given** 複数の社員がJavaスキルを保有している、**When** 人事担当者が「Java」で検索する、**Then** Java保有者の一覧が氏名（五十音順）で表示される
2. **Given** 社員が複数のスキルを保有している、**When** 人事担当者が「Java」と「AWS」の両方で検索する、**Then** 両方のスキルを持つ社員のみが表示される
3. **Given** 該当するスキル保有者がいない、**When** 人事担当者が存在しないスキルで検索する、**Then** 「該当する社員が見つかりません」とメッセージが表示される
4. **Given** 検索条件でスキルを選択している、**When** ドロップダウンから複数のスキルを選択する、**Then** 選択したすべてのスキルを保有する社員のみが表示される
5. **Given** 検索ボタンを押下した、**When** 検索処理中である、**Then** スピナーが表示される
6. **Given** 検索結果が表示されている、**When** 表示切り替えボタンをクリックする、**Then** カード表示と一覧表示が切り替わる
7. **Given** 検索画面を初めて表示した、**When** 検索を実行する、**Then** デフォルトで一覧表示される
8. **Given** 一覧表示で検索結果が表示されている、**When** 列を確認する、**Then** 左から顔写真、社員ID、氏名、組織、役職、雇用形態の順で表示される

---

### User Story 2 - 社員情報の閲覧と視覚的識別 (Priority: P1)

人事担当者が、顔写真付きの社員一覧・詳細画面で、人物を視覚的に識別できる。

**Why this priority**: 人事業務において人物の視覚的識別は必須。名前だけでは判別が困難なケースに対応。

**Independent Test**: 社員データに顔写真が登録されている状態で、一覧画面と詳細画面で顔写真が正しく表示されることで独立してテスト可能。

**Acceptance Scenarios**:

1. **Given** 社員に顔写真が登録されている、**When** 人事担当者が社員一覧を表示する、**Then** 各社員のサムネイル写真が表示される
2. **Given** 社員一覧が表示されている、**When** 人事担当者が特定の社員を選択する、**Then** 詳細画面に大きな顔写真と基本情報（社員ID、氏名、所属組織、役職、雇用区分、入社日、メールアドレス、保有スキル）が表示される
3. **Given** 社員に顔写真が登録されていない、**When** 人事担当者が社員一覧を表示する、**Then** 「no image」という文字列が表示される

---

### User Story 3 - システムへのログイン (Priority: P1)

人事担当者が、メールアドレスとパスワードでシステムにログインする。ログイン成功後はtop画面（ホーム画面）に遷移し、そこから社員検索などの各機能にアクセスできる。top画面のレイアウトは社員検索画面を踏襲し、画面左上部に「社員管理」カテゴリ名と「社員検索」ボタンを配置する。ウェルカムメッセージは表示しない。MVP時点ではアカウントロック機能、パスワードリセット機能、初回ログイン時の強制パスワード変更は実装しない。

**Why this priority**: すべての機能の前提となるため最優先。ただし、MVP時点ではシンプルな認証で十分。

**Independent Test**: 登録済みユーザーの認証情報でログインし、top画面に遷移することで独立してテスト可能。

**Acceptance Scenarios**:

1. **Given** 登録済みユーザーである、**When** 正しいメールアドレスとパスワードを入力する、**Then** ログインに成功しtop画面が表示される
2. **Given** ログイン画面を表示している、**When** 誤ったパスワードを入力する、**Then** 「認証に失敗しました」とエラーメッセージが表示される
3. **Given** 未登録のメールアドレスである、**When** ログインを試みる、**Then** 「認証に失敗しました」とエラーメッセージが表示される
4. **Given** ログインに複数回失敗している、**When** 再度ログインを試みる、**Then** アカウントロックされず、引き続きログイン試行が可能
5. **Given** top画面を表示している、**When** 社員検索ボタンをクリックする、**Then** 社員検索画面に遷移する
6. **Given** top画面を表示している、**When** 画面左上部を確認する、**Then** 「社員管理」カテゴリ名と「社員検索」ボタンが表示される

---

### Edge Cases

- 社員が1000人以上いる場合、検索結果の表示パフォーマンスはどうなるか？
- 顔写真ファイルが存在しない場合または読み込み失敗時は、「no image」という文字列を表示する
- 同じスキル名が複数登録されている場合、どう扱うか？
- 削除済み社員が検索結果に含まれないことをどう保証するか？
- 所属組織が削除されている社員の表示はどうなるか？

## Requirements

### Functional Requirements

- **FR-001**: システムは、ユーザーがメールアドレスとパスワードで認証できなければならない（アカウントロック機能、パスワードリセット機能、初回ログイン時の強制パスワード変更は不要）。認証トークンはlocalStorageに保存する。
- **FR-001-1**: システムは、ログイン成功後にtop画面（ホーム画面）を表示しなければならない。top画面は社員検索画面のレイアウトを踏襲し、画面左上部に「社員管理」カテゴリ名と「社員検索」ボタンを配置する。ウェルカムメッセージは表示しない。
- **FR-002**: システムは、社員の基本情報（社員ID、氏名、所属組織、役職、雇用区分、入社日、メールアドレス）を表示できなければならない
- **FR-003**: システムは、社員の顔写真を表示できなければならない（対応形式：JPEG、PNG、パス形式：`/photos/{employeeId}.jpg`）
- **FR-004**: システムは、社員を氏名・所属組織・役職・雇用区分・保有スキルで検索できなければならない（スキル検索はAND条件、レベルは検索条件に含めない、所属組織はドロップダウン選択、初期状態はすべて未選択で検索ボタン押下時に全社員表示）
- **FR-005**: システムは、検索結果を一覧表示し、ページネーション機能を提供しなければならない（1ページ20件固定、氏名五十音順でソート、ソート変更不可）
- **FR-006**: システムは、社員の保有スキル情報を表示できなければならない（スキル名とレベル1-5を表示）
- **FR-007**: システムは、社員詳細画面で所属組織を表示できなければならない
- **FR-008**: システムは、スキル検索UIとしてドロップダウンで複数選択（チェックボックス形式）を提供しなければならない
- **FR-009**: システムは、検索結果が0件の場合「該当する社員が見つかりません」とメッセージを表示しなければならない
- **FR-010**: システムは、削除済み社員を検索結果・一覧に表示してはならない
- **FR-011**: システムは、顔写真の読み込み失敗時または顔写真が存在しない場合に「no image」という文字列を表示しなければならない
- **FR-012**: システムは、検索結果の表示形式をカード表示と一覧表示で切り替えられなければならない。デフォルトは一覧表示とする。一覧表示の列順序は固定で、左から顔写真、社員ID、氏名、組織、役職、雇用形態の順とする。表示切り替えはトグルボタンで行い、検索ボタンが配置されているボックスの右下部に配置する。

### Key Entities

- **社員（Employee）**: システムに登録される従業員情報。社員ID、氏名、所属組織、役職、雇用区分、入社日、メールアドレス、顔写真パス（形式：`/photos/{employeeId}.jpg`）、削除フラグを持つ。1つの組織に所属し、複数のスキルを保有できる。MVPでは表示のみ（登録・更新・削除はCSV/SQL投入で対応）。
- **組織（Organization）**: 部署や課などの組織単位。組織ID、組織名を持つ。MVPでは検索条件と表示のみ（階層管理は対象外）。
- **スキル（Skill）**: 技術や資格などの能力情報。スキルID、スキル名、カテゴリを持つ。複数の社員が保有できる。MVPでは表示のみ。
- **社員スキル（EmployeeSkill）**: 社員とスキルの紐づけ。社員ID、スキルID、レベル（1-5）を持つ。MVPでは表示のみ。
- **ユーザー（User）**: システムにログインする人事担当者。ユーザーID、メールアドレス、パスワードハッシュ、氏名を持つ。

## Success Criteria

### Measurable Outcomes

- **SC-001**: 人事担当者が特定スキル保有者を検索し、候補者リストを作成するまでの時間が5分以内
- **SC-002**: 社員一覧画面の表示時間が1秒以内（100件の社員データ）
- **SC-003**: 社員検索の実行時間が2秒以内（複数条件での検索）
- **SC-004**: 社員詳細画面の表示時間が1秒以内
- **SC-005**: 顔写真付き社員一覧により、人事担当者が視覚的に社員を識別できる（顔写真表示率90%以上）
- **SC-006**: システムが1000人の社員データを扱える
- **SC-007**: 人事担当者の90%が初回利用時にスキル検索を成功させる

## Assumptions

- 初期データ（社員、組織、スキルマスタ、社員スキル）はSQL投入で事前に登録する（CSVインポート機能はMVP対象外）
- 社員情報の登録・更新・削除はMVP対象外（初期データで運用開始）
- 組織の登録・更新・削除はMVP対象外（検索条件と表示のみ）
- 組織階層管理はMVP対象外（所属組織名の表示のみ）
- ユーザー（人事担当者）の登録は管理者が手動で実施する
- ユーザー数は数名程度の人事担当者のみを想定
- パスワード忘れ時は管理者が手動でリセットする
- MVP時点では単一サーバー構成で運用する
- 稼働時間は平日9:00-18:00（業務時間内）を想定
- 対応ブラウザはChrome、Edge、Firefoxの最新版
- 顔写真はファイルシステムに保存する
- セッションタイムアウトは8時間とする
- データバックアップは日次で取得する
- 社員一覧のデフォルトソート順は氏名（五十音順）とする
- スキル検索はAND条件（すべてのスキルを保有）のみとする

## Out of Scope (MVP対象外)

以下の機能はMVPでは実装しない：

- **CSVインポート機能**（初期データはSQL投入で対応）
- **社員情報の登録・更新・削除機能**（初期データはSQL投入で対応）
- **顔写真のアップロード・更新・削除機能**（初期データで登録済み）
- **スキル情報の登録・削除機能**（初期データで登録済み）
- **組織の登録・更新・削除機能**（検索条件と表示のみ）
- **組織階層のツリー表示**（所属組織名の表示のみ）
- アカウントロック機能（連続ログイン失敗時の制限）
- パスワードリセット機能（メール経由でのリセット）
- 初回ログイン時の強制パスワード変更
- スキルレベルを考慮した検索機能
- スキル検索のOR条件
- 一覧画面のソート変更機能
- ページサイズの変更機能（20件以外）
- 詳細な権限管理（ロールごとの細かい閲覧制御、部署単位のデータアクセス制限）
- 詳細な監査ログ（画面単位・項目単位の操作履歴、変更前後の差分記録）
- 高度なスキル分析（スキルマップ自動生成、スキルギャップ分析、スキル推移グラフ）
- 組織改編の履歴管理（組織変更のタイムライン管理、過去時点の組織構造参照）
- 外部システム連携（人事給与システムとの自動連携、Active Directoryとの同期）
- 高度な検索機能（顔写真による検索、自然言語検索、保存した検索条件）
- 通知機能（スキル更新の通知、組織変更の通知）
- レポート機能（スキル分布レポート、組織別集計レポート）
- モバイル対応（スマートフォン専用UI、ネイティブアプリ）
- CSVエクスポート（検索結果のCSV出力）
- 一括更新機能（複数社員の情報を一括で更新）
